# 事件循环

## 前言

首先，得明确一点，**JavaScript 是一门单线程语言**。也就是说，JavaScript 代码是同步执行的，所有的代码都是由上而下执行的：

```js
var name = 'nick'
console.log(name)

var age = 18
console.log(age)
```

但是如果代码量过大，有些代码的逻辑又复杂，一直不能运行完毕，后面的代码就无法运行，这就会造成一些堵塞的问题。就好比你去公交车站排队，等的人多了，你就必须等前面的人一个一个进入车里面，你才能再进去。

## 同步任务和异步任务

JavaScript 中，整体代码的运行我们可以称之为**同步任务**，也就是一行一行的执行；而另一些代码，可以不必等待前面的代码执行完毕之后再去执行，我们称之为**异步任务**。比方说，我们打开一个网页，页面骨架元素的加载就等同于同步任务，而网页上图片这种耗时的加载就等同于异步任务。

这里借用网上的一张图片：

![](https://user-gold-cdn.xitu.io/2017/11/21/15fdd88994142347?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

解释一下图片上的内容：

- 当一段代码开始运行时，会检查里面的同步任务及异步任务；同步任务进入主线程，异步任务进入`Event Table`；
- `Event Table`会注册异步任务回调函数，然后放进`Event Queue`；
- 当主线程中的任务全部执行完毕后，回去`Event Queue`中读取对应的异步任务，放进主线程中执行。
- 不断重复上面的步骤。

上述内容就是我们常说的事件循环（`Event Loop`）。

```js
setTimeout(() => {
  console.log('1秒后出现')
}, 1000)

console.log('我来啦')
```

上面的代码中，
